diff -r -u freeradius-server-3.0.1.bak/raddb/mods-available/ippool freeradius-server-3.0.1/raddb/mods-available/ippool
--- freeradius-server-3.0.1.bak/raddb/mods-available/ippool	2014-01-17 11:20:48.609733064 -0500
+++ freeradius-server-3.0.1/raddb/mods-available/ippool	2014-01-17 12:33:11.884537885 -0500
@@ -1,6 +1,6 @@
 # -*- text -*-
 #
-#  $Id: d52dc9b385dec10e970ba9af070af612f25d596d $
+#  $Id: 1d3305ba45ec71336f55f8f1db05f183772e1b82 $
 
 #  Do server side ip pool management. Should be added in
 #  post-auth and accounting sections.
@@ -22,54 +22,45 @@
 #		DEFAULT Group == teachers, Pool-Name := "teachers"
 #		DEFAULT	Group == other, Pool-Name := "DEFAULT"
 #
-# ********* IF YOU CHANGE THE RANGE PARAMETERS YOU MUST *********
-# ********* THEN ERASE THE DB FILES                     *********
+# Note: If you change the range parameters you must then erase the
+#       db files.
 #
 ippool main_pool {
+	#  The main db file used to allocate addresses.
+	filename = ${db_dir}/db.ippool
 
-	#  range-start,range-stop:
-	#	The start and end ip addresses for this pool.
+	#  The start and end ip addresses for this pool.
 	range_start = 192.0.2.1
 	range_stop = 192.0.2.254
 
-	#  netmask:
-	#	The network mask used for this pool.
+	#  The network mask used for this pool.
 	netmask = 255.255.255.0
 
-	#  cache_size:
-	#	The gdbm cache size for the db files. Should
-	#	be equal to the number of ip's available in
-	#	the ip pool
+	#  The gdbm cache size for the db files. Should
+	#  be equal to the number of ip's available in
+	#  the ip pool
 	cache_size = 800
 
-	# session-db:
-	#	The main db file used to allocate addresses.
-	session_db = ${db_dir}/db.ippool
-
-	# ip-index:
-	#	Helper db index file used in multilink
+	#  Helper db index file used in multilink
 	ip_index = ${db_dir}/db.ipindex
 
-	# override:
-	#	If set, the Framed-IP-Address already in the
-	#	reply (if any) will be discarded, and replaced
-	#	with a Framed-IP-Address assigned here.
+	#  If set, the Framed-IP-Address already in the
+	#  reply (if any) will be discarded, and replaced
+	#  ith a Framed-IP-Address assigned here.
 	override = no
 
-	# maximum-timeout:
-	#	Specifies the maximum time in seconds that an
-	#	entry may be active.  If set to zero, means
-	#	"no timeout".  The default value is 0
+	#  Specifies the maximum time in seconds that an
+	#  entry may be active.  If set to zero, means
+	#  "no timeout".  The default value is 0
 	maximum_timeout = 0
 
-	# key:
-	#	The key to use for the session database (which
-	#	holds the allocated ip's) normally it should
-	#	just be the nas ip/port (which is the default).
+	#  The key to use for the session database (which
+	#  holds the allocated ip's) normally it should
+	#  just be the nas ip/port (which is the default).
 	#
-	#	If your NAS sends the same value of NAS-Port
-	#	all requests, the key should be based on some
-	#	other attribute that is in ALL requests, AND
-	#	is unique to each machine needing an IP address.
-	#key = "%{NAS-IP-Address} %{NAS-Port}"
+	#  If your NAS sends the same value of NAS-Port
+	#  all requests, the key should be based on some
+	#  other attribute that is in ALL requests, AND
+	#  is unique to each machine needing an IP address.
+#	key = "%{NAS-IP-Address} %{NAS-Port}"
 }
commit 82d3d851e03fdc403c6694d5470905c489acb1b5
Author: Alan T. DeKok <aland@freeradius.org>
Date:   Sat Jan 18 15:58:28 2014 -0500

    Set the default length for the attributes

diff --git a/src/lib/valuepair.c b/src/lib/valuepair.c
index d1d1fca..ac955ad 100644
--- a/src/lib/valuepair.c
+++ b/src/lib/valuepair.c
@@ -109,6 +109,8 @@ VALUE_PAIR *pairalloc(TALLOC_CTX *ctx, DICT_ATTR const *da)
 	vp->op = T_OP_EQ;
 	vp->type = VT_NONE;
 
+	vp->length = da->flags.length;
+
 	talloc_set_destructor(vp, _pairfree);
 
 	return vp;
